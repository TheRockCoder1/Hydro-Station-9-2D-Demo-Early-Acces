<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hydro Station 9 Platformer</title>

    <style>
        canvas {
            background: #111;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>

<canvas id="game" width="1500" height="850"></canvas>

<script>
// -------------------- Canvas --------------------
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// -------------------- Player --------------------
const player = {
    x: 200,
    y: 200,
    size: 64,
    vx: 0,
    vy: 0,
    onGround: false
};

// -------------------- Physics --------------------
const GRAVITY = 2000;
const JUMP_FORCE = -900;
const MOVE_SPEED = 300;

// -------------------- Input --------------------
const keys = new Set();
window.addEventListener("keydown", e => keys.add(e.key.toLowerCase()));
window.addEventListener("keyup", e => keys.delete(e.key.toLowerCase()));

// -------------------- Player Sprite --------------------
let spriteLoaded = false;
const sprite = new Image();
sprite.src = "player.png";
sprite.onload = () => spriteLoaded = true;
sprite.onerror = () => console.log("ERROR: Player sprite could not load!");

const FRAME_WIDTH = 32;
const FRAME_HEIGHT = 32;
const FRAME_COUNT = 1;
let currentFrame = 0;

// -------------------- Ground (GREEN RECT) --------------------
const ground = {
    x: 0,
    y: 0 - -700,
    width: 1600,
    height: 200
};

// -------------------- Update --------------------
function update(dt) {

    // Horizontal movement
    player.vx = 0;
    if (keys.has("a") || keys.has("arrowleft")) player.vx = -MOVE_SPEED;
    if (keys.has("d") || keys.has("arrowright")) player.vx = MOVE_SPEED;

    // Gravity
    player.vy += GRAVITY * dt;

    // Jump
    if ((keys.has("w") || keys.has("arrowup") || keys.has(" ")) && player.onGround) {
        player.vy = JUMP_FORCE;
        player.onGround = false;
    }

    // Apply movement
    player.x += player.vx * dt;
    player.y += player.vy * dt;

    // Ground collision
    if (player.y + player.size > ground.y) {
        player.y = ground.y - player.size;
        player.vy = 0;
        player.onGround = true;
    } else {
        player.onGround = false;
    }

    // Canvas boundaries
    if (player.x < 0) player.x = 0;
    if (player.x + player.size > canvas.width)
        player.x = canvas.width - player.size;
}

// -------------------- Draw --------------------
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw ground (GREEN RECT)
    ctx.fillStyle = "green";
    ctx.fillRect(ground.x, ground.y, ground.width, ground.height);

    // Draw player
    if (spriteLoaded) {
        ctx.drawImage(
            sprite,
            currentFrame * FRAME_WIDTH,
            0,
            FRAME_WIDTH,
            FRAME_HEIGHT,
            player.x,
            player.y,
            player.size,
            player.size
        );
    }
}

// -------------------- Game Loop --------------------
let last = 0;
function loop(timestamp) {
    const dt = (timestamp - last) / 1000;
    last = timestamp;

    update(dt);
    draw();

    requestAnimationFrame(loop);
}

requestAnimationFrame(loop);
</script>

</body>
</html>